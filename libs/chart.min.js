// chart.min.js â€” lightweight mini build (line chart only)
class MiniChart{
  constructor(ctx,config){
    this.ctx=ctx;
    this.data=config.data;
    this.options=config.options||{};
    this.maxPoints=this.options.maxPoints||40;
    this.render();
  }
  addPoint(v){
    this.data.labels.push("");
    this.data.datasets[0].data.push(v);
    if(this.data.labels.length>this.maxPoints){
      this.data.labels.shift();
      this.data.datasets[0].data.shift();
    }
    this.render();
  }
  render(){
    const c=this.ctx.getContext("2d");
    const W=this.ctx.width, H=this.ctx.height;
    c.clearRect(0,0,W,H);
    c.strokeStyle="#4fc3f7";
    c.lineWidth=2;
    c.beginPath();
    const d=this.data.datasets[0].data;
    if(!d.length) return;
    const max=Math.max(...d), min=Math.min(...d);
    d.forEach((v,i)=>{
      const x=i*(W/d.length);
      const y=H-((v-min)/(max-min+0.0001))*H;
      i===0?c.moveTo(x,y):c.lineTo(x,y);
    });
    c.stroke();
  }
}
window.Chart=MiniChart;
